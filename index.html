<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AYA ELSAYED</title>

<!-- Ø®Ø· Tajawal -->
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

<!-- Ù…ÙƒØªØ¨Ø© Supabase (Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root{
  --pink:#FF4F9D;
  --pink-2:#FF8AC7;
  --bg:#F7F7F7;
  --card-shadow: 0 10px 30px rgba(0,0,0,0.06);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Tajawal',sans-serif;
  background:var(--bg);
  color:#333;
}
.header{
  background:white;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06);
  position:sticky;
  top:0;
  z-index:10;
}
.logo{font-weight:700;color:var(--pink);font-size:20px}
.nav a{margin-left:18px;text-decoration:none;color:#333;font-weight:500;cursor:pointer;}
.container{max-width:1100px;margin:30px auto;padding:0 16px}

/* hero */
.hero{
  background: linear-gradient(180deg, rgba(255,140,180,0.08), rgba(255,140,180,0.03));
  border-radius:18px;
  padding:28px;
  display:flex;
  gap:20px;
  align-items:center;
  box-shadow:var(--card-shadow);
}
.hero .left{flex:1}
.hero h1{margin:0;font-size:28px;color:#222}
.hero p{margin-top:8px;color:#666}
.hero .cta{margin-top:12px;padding:10px 16px;background:var(--pink);color:white;border:none;border-radius:12px;cursor:pointer;font-weight:600}

/* products grid */
.products{
  margin-top:26px;
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(240px,1fr));
  gap:20px;
}
.card{
  background:white;border-radius:16px;padding:14px;box-shadow:var(--card-shadow);
  transition:transform .18s, box-shadow .18s;
  display:flex;flex-direction:column;gap:8px;
}
.card:hover{transform:translateY(-6px);box-shadow:0 20px 40px rgba(0,0,0,0.08)}
.card img{width:100%;height:190px;object-fit:cover;border-radius:10px}
.card h3{margin:0;font-size:18px}
.price{color:var(--pink);font-weight:700;font-size:18px}
.card .actions{margin-top:auto;display:flex;gap:8px}
.btn{
  padding:9px 12px;border-radius:12px;border:none;cursor:pointer;font-weight:600;
}
.btn-buy{background:var(--pink);color:white;}
.btn-add{background:transparent;border:1px solid #eee;color:#333}

/* cart modal */
.cart-modal {
  display: none;
  position: fixed;
  z-index: 999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
}
.cart-content {
  background: #fff;
  width: 350px;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.4);
  animation: showCart .3s ease;
}
.close {
  float: left;
  cursor: pointer;
  font-size: 28px;
  font-weight: bold;
}
#cart-items {
  max-height: 300px;
  overflow-y: auto;
  margin: 15px 0;
}
.order-btn {
  display: block;
  background: #ff3b77;
  color: #fff;
  text-decoration: none;
  padding: 10px;
  border-radius: 10px;
  margin-top: 10px;
}

@keyframes showCart {
  from { transform: scale(0.7); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}

.footer{margin:40px 0;text-align:center;color:#777}
</style>
</head>
<body>



<header class="header">
  <div style="display:flex;align-items:center;gap:12px">
    <div class="logo">AYA ELSAYED</div>
    <div style="color:#999;font-size:14px"> Ø£Ø¯ÙˆØ§Øª ØªØ¬Ù…ÙŠÙ„</div>
  </div>

  <nav class="nav">
<a class="cart-btn" href="cart.html">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</a>
  </nav>
</header>

<main class="container">

  <section class="hero">
    <div class="left">
      <h1>Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h1>
      <p>Ø§ÙƒØªØ´ÙÙŠ Ø£Ø¬Ù…Ù„ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ¬Ù…ÙŠÙ„ â€” ØªØ³ÙˆÙ‘Ù‚ÙŠ Ø§Ù„Ø¢Ù† Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©.</p>
    </div>

    <div style="width:220px">
      <img src="logo.jpg" style="width:100%;border-radius:12px;box-shadow:var(--card-shadow)" alt="beauty">
    </div>
  </section>

  <div id="products" class="products" style="min-height:120px;">
    <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø³ÙˆÙ ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
  </div>

  <div class="footer">Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© â€” AYA ELSAYED</div>

</main>

<script>
// --- Supabase ---
const supabaseUrl = "https://qccpddjnozehorhleegz.supabase.co";
const supabaseKey = "sb_publishable_rSdFTm7TUh-HDRLKacdZxw_BpQOTeIr";
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
async function loadProducts(){
  const box = document.getElementById("products");
  box.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:30px;color:#777">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</div>`;

  const { data, error } = await supabase
    .from("products")
    .select("*")
    .order("created_at", { ascending:false });

  if(error){
    console.error(error);
    box.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:#c00;padding:20px">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>`;
    return;
  }

  if(!data || data.length===0){
    box.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:20px;color:#777">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯</div>`;
    return;
  }

  box.innerHTML = "";

  data.forEach(p => {
    const html = `
      <div class="card">
        <img src="${p.image}" alt="${p.name}">
        <h3>${p.name}</h3>
        <p class="price">${p.price} Ø¬Ù†ÙŠÙ‡</p>
        <p style="color:#666;font-size:14px;min-height:40px">${p.description || ''}</p>

        <div class="actions">
<button class="btn btn-buy" onclick="addToCart('${p.id}', '${p.name}', ${p.price}, '${p.image}')">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
        </div>
      </div>
    `;
    box.innerHTML += html;
  });
}

function addToCart(id, name, price, image) {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // Ù„Ùˆ Ø§Ù„Ù…Ù†ØªØ¬ Ù…ÙˆØ¬ÙˆØ¯ Ù†Ø²ÙˆØ¯ Ø§Ù„ÙƒÙ…ÙŠØ©
    const index = cart.findIndex(item => item.id === id);
    if (index !== -1) {
        cart[index].qty++;
    } else {
        cart.push({
            id,
            name,
            price,
            image,
            qty: 1
        });
    }

    localStorage.setItem("cart", JSON.stringify(cart));
    alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©!");
    loadCart();
}

function order(id){
  location.href = `order.html?product=${id}`;
}

// Ø§Ù„Ø³Ù„Ø©
function toggleCart(){
  const modal = document.getElementById("cartModal");
  modal.style.display = modal.style.display === "flex" ? "none" : "flex";
}

function loadCart(){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const container = document.getElementById("cart-items");
  const totalPrice = document.getElementById("totalPrice");

  container.innerHTML = "";
  let total = 0;

  cart.forEach((item,i)=>{
    total += item.price * item.qty;

    container.innerHTML += `
      <div style="margin-bottom:10px">
        <strong>${item.name}</strong>
        <p>${item.price} Ø¬Ù†ÙŠÙ‡ Ã— ${item.qty}</p>
        <button onclick="removeFromCart(${i})">Ø­Ø°Ù</button>
        <hr>
      </div>
    `;
  });

  totalPrice.innerText = total;
}

function removeFromCart(i){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.splice(i,1);
  localStorage.setItem("cart", JSON.stringify(cart));
  loadCart();
}

window.onload = function(){
  loadProducts();
  loadCart();
};
</script>

</body>
</html>
